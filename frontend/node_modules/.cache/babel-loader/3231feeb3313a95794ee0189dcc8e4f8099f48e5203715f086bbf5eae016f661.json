{"ast":null,"code":"import \"core-js/modules/es.date.to-string.js\";\nimport { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createBlock as _createBlock } from \"vue\";\nvar _hoisted_1 = {\n  id: \"app\"\n};\nvar _hoisted_2 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_view = _resolveComponent(\"router-view\");\n  var _component_el_col = _resolveComponent(\"el-col\");\n  var _component_el_menu_item = _resolveComponent(\"el-menu-item\");\n  var _component_el_sub_menu = _resolveComponent(\"el-sub-menu\");\n  var _component_el_menu = _resolveComponent(\"el-menu\");\n  var _component_el_row = _resolveComponent(\"el-row\");\n  var _component_el_header = _resolveComponent(\"el-header\");\n  var _component_el_main = _resolveComponent(\"el-main\");\n  var _component_el_footer = _resolveComponent(\"el-footer\");\n  var _component_el_container = _resolveComponent(\"el-container\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_ctx.$route.meta.requiresAuth === false ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 0\n  }, [_createCommentVNode(\" Unauthenticated routes (login page) \"), _createVNode(_component_router_view)], 64 /* STABLE_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Authenticated routes with main layout \"), $setup.isAuthenticated ? (_openBlock(), _createBlock(_component_el_container, {\n    key: 0\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_el_header, {\n        \"class\": \"app-header\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_el_row, {\n            type: \"flex\",\n            justify: \"space-between\",\n            align: \"middle\",\n            style: {\n              \"height\": \"100%\"\n            }\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_col, {\n                span: 8\n              }, {\n                \"default\": _withCtx(function () {\n                  return _cache[0] || (_cache[0] = [_createElementVNode(\"h1\", null, \"Student Management System\", -1 /* HOISTED */)]);\n                }),\n                _: 1 /* STABLE */\n              }), _createVNode(_component_el_col, {\n                span: 16\n              }, {\n                \"default\": _withCtx(function () {\n                  return [_createVNode(_component_el_menu, {\n                    mode: \"horizontal\",\n                    router: true,\n                    \"background-color\": \"#409EFF\",\n                    \"text-color\": \"#fff\",\n                    \"active-text-color\": \"#ffd04b\"\n                  }, {\n                    \"default\": _withCtx(function () {\n                      return [_createVNode(_component_el_menu_item, {\n                        index: \"/dashboard\"\n                      }, {\n                        \"default\": _withCtx(function () {\n                          return _cache[1] || (_cache[1] = [_createTextVNode(\"Dashboard\")]);\n                        }),\n                        _: 1 /* STABLE */\n                      }), _createVNode(_component_el_menu_item, {\n                        index: \"/students\"\n                      }, {\n                        \"default\": _withCtx(function () {\n                          return _cache[2] || (_cache[2] = [_createTextVNode(\"Students\")]);\n                        }),\n                        _: 1 /* STABLE */\n                      }), _createVNode(_component_el_menu_item, {\n                        index: \"/classes\"\n                      }, {\n                        \"default\": _withCtx(function () {\n                          return _cache[3] || (_cache[3] = [_createTextVNode(\"Classes\")]);\n                        }),\n                        _: 1 /* STABLE */\n                      }), _createVNode(_component_el_sub_menu, {\n                        index: \"user\",\n                        style: {\n                          \"float\": \"right\"\n                        }\n                      }, {\n                        title: _withCtx(function () {\n                          var _$setup$user;\n                          return [_createElementVNode(\"span\", null, _toDisplayString(((_$setup$user = $setup.user) === null || _$setup$user === void 0 ? void 0 : _$setup$user.username) || 'User'), 1 /* TEXT */)];\n                        }),\n                        \"default\": _withCtx(function () {\n                          return [_createVNode(_component_el_menu_item, {\n                            index: \"/profile\"\n                          }, {\n                            \"default\": _withCtx(function () {\n                              return _cache[4] || (_cache[4] = [_createTextVNode(\"Profile\")]);\n                            }),\n                            _: 1 /* STABLE */\n                          }), _createVNode(_component_el_menu_item, {\n                            index: \"/change-password\"\n                          }, {\n                            \"default\": _withCtx(function () {\n                              return _cache[5] || (_cache[5] = [_createTextVNode(\"Change Password\")]);\n                            }),\n                            _: 1 /* STABLE */\n                          }), _createVNode(_component_el_menu_item, {\n                            onClick: $setup.logout\n                          }, {\n                            \"default\": _withCtx(function () {\n                              return _cache[6] || (_cache[6] = [_createTextVNode(\"Logout\")]);\n                            }),\n                            _: 1 /* STABLE */\n                          }, 8 /* PROPS */, [\"onClick\"])];\n                        }),\n                        _: 1 /* STABLE */\n                      })];\n                    }),\n                    _: 1 /* STABLE */\n                  })];\n                }),\n                _: 1 /* STABLE */\n              })];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_main, {\n        \"class\": \"app-main\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_router_view)];\n        }),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_footer, {\n        \"class\": \"app-footer\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createElementVNode(\"p\", null, \"Student Management System Â© \" + _toDisplayString(new Date().getFullYear()), 1 /* TEXT */)];\n        }),\n        _: 1 /* STABLE */\n      })];\n    }),\n    _: 1 /* STABLE */\n  })) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createCommentVNode(\" This will redirect to login if not authenticated but route requires auth \"), _createVNode(_component_router_view)]))], 64 /* STABLE_FRAGMENT */))]);\n}","map":{"version":3,"names":["id","key","_createElementBlock","_hoisted_1","_ctx","$route","meta","requiresAuth","_Fragment","_createCommentVNode","_createVNode","_component_router_view","$setup","isAuthenticated","_createBlock","_component_el_container","_withCtx","_component_el_header","_component_el_row","type","justify","align","style","_component_el_col","span","_cache","_createElementVNode","_","_component_el_menu","mode","router","_component_el_menu_item","index","_createTextVNode","_component_el_sub_menu","title","_$setup$user","_toDisplayString","user","username","onClick","logout","_component_el_main","_component_el_footer","Date","getFullYear","_hoisted_2"],"sources":["E:\\GoLand20240404\\Project\\student_management\\frontend\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <template v-if=\"$route.meta.requiresAuth === false\">\r\n      <!-- Unauthenticated routes (login page) -->\r\n      <router-view />\r\n    </template>\r\n    <template v-else>\r\n      <!-- Authenticated routes with main layout -->\r\n      <el-container v-if=\"isAuthenticated\">\r\n        <el-header class=\"app-header\">\r\n          <el-row type=\"flex\" justify=\"space-between\" align=\"middle\" style=\"height: 100%\">\r\n            <el-col :span=\"8\">\r\n              <h1>Student Management System</h1>\r\n            </el-col>\r\n            <el-col :span=\"16\">\r\n              <el-menu mode=\"horizontal\" :router=\"true\" background-color=\"#409EFF\" text-color=\"#fff\" active-text-color=\"#ffd04b\">\r\n                <el-menu-item index=\"/dashboard\">Dashboard</el-menu-item>\r\n                <el-menu-item index=\"/students\">Students</el-menu-item>\r\n                <el-menu-item index=\"/classes\">Classes</el-menu-item>\r\n                \r\n                <el-sub-menu index=\"user\" style=\"float: right;\">\r\n                  <template #title>\r\n                    <span>{{ user?.username || 'User' }}</span>\r\n                  </template>\r\n                  <el-menu-item index=\"/profile\">Profile</el-menu-item>\r\n                  <el-menu-item index=\"/change-password\">Change Password</el-menu-item>\r\n                  <el-menu-item @click=\"logout\">Logout</el-menu-item>\r\n                </el-sub-menu>\r\n              </el-menu>\r\n            </el-col>\r\n          </el-row>\r\n        </el-header>\r\n        \r\n        <el-main class=\"app-main\">\r\n          <router-view />\r\n        </el-main>\r\n        \r\n        <el-footer class=\"app-footer\">\r\n          <p>Student Management System &copy; {{ new Date().getFullYear() }}</p>\r\n        </el-footer>\r\n      </el-container>\r\n      <div v-else>\r\n        <!-- This will redirect to login if not authenticated but route requires auth -->\r\n        <router-view />\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'App',\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    \r\n    const isAuthenticated = computed(() => store.getters['auth/isAuthenticated'])\r\n    const user = computed(() => store.getters['auth/user'])\r\n    \r\n    // Check if user is authenticated when component is mounted\r\n    onMounted(() => {\r\n      // Try to restore session from localStorage\r\n      const token = localStorage.getItem('token')\r\n      if (token) {\r\n        store.dispatch('auth/restoreSession', token)\r\n          .catch(() => {\r\n            // If the token is invalid or expired, redirect to login\r\n            router.push('/login')\r\n          })\r\n      } else if (router.currentRoute.value.meta.requiresAuth !== false) {\r\n        // Redirect to login if current route requires auth and no token\r\n        router.push('/login')\r\n      }\r\n    })\r\n    \r\n    // Logout function\r\n    const logout = () => {\r\n      store.dispatch('auth/logout')\r\n      router.push('/login')\r\n    }\r\n    \r\n    return {\r\n      isAuthenticated,\r\n      user,\r\n      logout\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* App-specific styles would be here, but we use main.css for global styles */\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}