{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_menu_item = _resolveComponent(\"el-menu-item\");\n  const _component_el_sub_menu = _resolveComponent(\"el-sub-menu\");\n  const _component_el_menu = _resolveComponent(\"el-menu\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_el_main = _resolveComponent(\"el-main\");\n  const _component_el_footer = _resolveComponent(\"el-footer\");\n  const _component_el_container = _resolveComponent(\"el-container\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_ctx.$route.meta.requiresAuth === false ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 0\n  }, [_createCommentVNode(\" Unauthenticated routes (login page) \"), _createVNode(_component_router_view)], 64 /* STABLE_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Authenticated routes with main layout \"), $setup.isAuthenticated ? (_openBlock(), _createBlock(_component_el_container, {\n    key: 0\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_header, {\n      class: \"app-header\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_row, {\n        type: \"flex\",\n        justify: \"space-between\",\n        align: \"middle\",\n        style: {\n          \"height\": \"100%\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_col, {\n          span: 8\n        }, {\n          default: _withCtx(() => _cache[0] || (_cache[0] = [_createElementVNode(\"h1\", null, \"Student Management System\", -1 /* HOISTED */)])),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_col, {\n          span: 16\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_menu, {\n            mode: \"horizontal\",\n            router: true,\n            \"background-color\": \"#409EFF\",\n            \"text-color\": \"#fff\",\n            \"active-text-color\": \"#ffd04b\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_menu_item, {\n              index: \"/dashboard\"\n            }, {\n              default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"Dashboard\")])),\n              _: 1 /* STABLE */\n            }), _createVNode(_component_el_menu_item, {\n              index: \"/students\"\n            }, {\n              default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"Students\")])),\n              _: 1 /* STABLE */\n            }), _createVNode(_component_el_menu_item, {\n              index: \"/classes\"\n            }, {\n              default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"Classes\")])),\n              _: 1 /* STABLE */\n            }), _createVNode(_component_el_sub_menu, {\n              index: \"user\",\n              style: {\n                \"float\": \"right\"\n              }\n            }, {\n              title: _withCtx(() => [_createElementVNode(\"span\", null, _toDisplayString($setup.user?.username || 'User'), 1 /* TEXT */)]),\n              default: _withCtx(() => [_createVNode(_component_el_menu_item, {\n                index: \"/profile\"\n              }, {\n                default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"Profile\")])),\n                _: 1 /* STABLE */\n              }), _createVNode(_component_el_menu_item, {\n                index: \"/change-password\"\n              }, {\n                default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"Change Password\")])),\n                _: 1 /* STABLE */\n              }), _createVNode(_component_el_menu_item, {\n                onClick: $setup.logout\n              }, {\n                default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"Logout\")])),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"onClick\"])]),\n              _: 1 /* STABLE */\n            })]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_main, {\n      class: \"app-main\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_router_view)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_footer, {\n      class: \"app-footer\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"p\", null, \"Student Management System Â© \" + _toDisplayString(new Date().getFullYear()), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createCommentVNode(\" This will redirect to login if not authenticated but route requires auth \"), _createVNode(_component_router_view)]))], 64 /* STABLE_FRAGMENT */))]);\n}","map":{"version":3,"names":["id","key","_createElementBlock","_hoisted_1","_ctx","$route","meta","requiresAuth","_Fragment","_createCommentVNode","_createVNode","_component_router_view","$setup","isAuthenticated","_createBlock","_component_el_container","default","_withCtx","_component_el_header","class","_component_el_row","type","justify","align","style","_component_el_col","span","_cache","_createElementVNode","_","_component_el_menu","mode","router","_component_el_menu_item","index","_createTextVNode","_component_el_sub_menu","title","_toDisplayString","user","username","onClick","logout","_component_el_main","_component_el_footer","Date","getFullYear","_hoisted_2"],"sources":["E:\\GoLand20240404\\Project\\student_management\\frontend\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <template v-if=\"$route.meta.requiresAuth === false\">\r\n      <!-- Unauthenticated routes (login page) -->\r\n      <router-view />\r\n    </template>\r\n    <template v-else>\r\n      <!-- Authenticated routes with main layout -->\r\n      <el-container v-if=\"isAuthenticated\">\r\n        <el-header class=\"app-header\">\r\n          <el-row type=\"flex\" justify=\"space-between\" align=\"middle\" style=\"height: 100%\">\r\n            <el-col :span=\"8\">\r\n              <h1>Student Management System</h1>\r\n            </el-col>\r\n            <el-col :span=\"16\">\r\n              <el-menu mode=\"horizontal\" :router=\"true\" background-color=\"#409EFF\" text-color=\"#fff\" active-text-color=\"#ffd04b\">\r\n                <el-menu-item index=\"/dashboard\">Dashboard</el-menu-item>\r\n                <el-menu-item index=\"/students\">Students</el-menu-item>\r\n                <el-menu-item index=\"/classes\">Classes</el-menu-item>\r\n                \r\n                <el-sub-menu index=\"user\" style=\"float: right;\">\r\n                  <template #title>\r\n                    <span>{{ user?.username || 'User' }}</span>\r\n                  </template>\r\n                  <el-menu-item index=\"/profile\">Profile</el-menu-item>\r\n                  <el-menu-item index=\"/change-password\">Change Password</el-menu-item>\r\n                  <el-menu-item @click=\"logout\">Logout</el-menu-item>\r\n                </el-sub-menu>\r\n              </el-menu>\r\n            </el-col>\r\n          </el-row>\r\n        </el-header>\r\n        \r\n        <el-main class=\"app-main\">\r\n          <router-view />\r\n        </el-main>\r\n        \r\n        <el-footer class=\"app-footer\">\r\n          <p>Student Management System &copy; {{ new Date().getFullYear() }}</p>\r\n        </el-footer>\r\n      </el-container>\r\n      <div v-else>\r\n        <!-- This will redirect to login if not authenticated but route requires auth -->\r\n        <router-view />\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'App',\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    \r\n    const isAuthenticated = computed(() => store.getters['auth/isAuthenticated'])\r\n    const user = computed(() => store.getters['auth/user'])\r\n    \r\n    // Check if user is authenticated when component is mounted\r\n    onMounted(() => {\r\n      // Try to restore session from localStorage\r\n      const token = localStorage.getItem('token')\r\n      if (token) {\r\n        store.dispatch('auth/restoreSession', token)\r\n          .catch(() => {\r\n            // If the token is invalid or expired, redirect to login\r\n            router.push('/login')\r\n          })\r\n      } else if (router.currentRoute.value.meta.requiresAuth !== false) {\r\n        // Redirect to login if current route requires auth and no token\r\n        router.push('/login')\r\n      }\r\n    })\r\n    \r\n    // Logout function\r\n    const logout = () => {\r\n      store.dispatch('auth/logout')\r\n      router.push('/login')\r\n    }\r\n    \r\n    return {\r\n      isAuthenticated,\r\n      user,\r\n      logout\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* App-specific styles would be here, but we use main.css for global styles */\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}