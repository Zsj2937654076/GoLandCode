{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"profile-container\"\n};\nconst _hoisted_2 = {\n  class: \"action-buttons mt-20\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_descriptions_item = _resolveComponent(\"el-descriptions-item\");\n  const _component_el_descriptions = _resolveComponent(\"el-descriptions\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"h1\", {\n    class: \"page-title\"\n  }, \"User Profile\", -1 /* HOISTED */)), _withDirectives((_openBlock(), _createBlock(_component_el_card, null, {\n    default: _withCtx(() => [$setup.user ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 0\n    }, [_createVNode(_component_el_descriptions, {\n      column: 1,\n      border: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n        label: \"Username\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.user.username), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"Email\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.user.email), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"Role\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.user.role), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.push('/change-password'))\n    }, {\n      default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\" Change Password \")])),\n      _: 1 /* STABLE */\n    })])], 64 /* STABLE_FRAGMENT */)) : !$setup.loading ? (_openBlock(), _createBlock(_component_el_empty, {\n      key: 1,\n      description: \"User profile not found\"\n    })) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })), [[_directive_loading, $setup.loading]])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createBlock","_component_el_card","default","_withCtx","$setup","user","_Fragment","key","_createVNode","_component_el_descriptions","column","border","_component_el_descriptions_item","label","_createTextVNode","_toDisplayString","username","_","email","role","_hoisted_2","_component_el_button","type","onClick","_cache","$event","_ctx","$router","push","loading","_component_el_empty","description","_createCommentVNode"],"sources":["E:\\GoLand20240404\\Project\\student_management\\frontend\\src\\views\\auth\\Profile.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-container\">\r\n    <h1 class=\"page-title\">User Profile</h1>\r\n    \r\n    <el-card v-loading=\"loading\">\r\n      <template v-if=\"user\">\r\n        <el-descriptions :column=\"1\" border>\r\n          <el-descriptions-item label=\"Username\">\r\n            {{ user.username }}\r\n          </el-descriptions-item>\r\n          \r\n          <el-descriptions-item label=\"Email\">\r\n            {{ user.email }}\r\n          </el-descriptions-item>\r\n          \r\n          <el-descriptions-item label=\"Role\">\r\n            {{ user.role }}\r\n          </el-descriptions-item>\r\n        </el-descriptions>\r\n        \r\n        <div class=\"action-buttons mt-20\">\r\n          <el-button \r\n            type=\"primary\" \r\n            @click=\"$router.push('/change-password')\"\r\n          >\r\n            Change Password\r\n          </el-button>\r\n        </div>\r\n      </template>\r\n      \r\n      <el-empty \r\n        v-else-if=\"!loading\" \r\n        description=\"User profile not found\"\r\n      />\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'Profile',\r\n  setup() {\r\n    const store = useStore()\r\n    const loading = ref(false)\r\n    \r\n    // Get user from store\r\n    const user = computed(() => store.getters['auth/user'])\r\n    \r\n    // Fetch user profile\r\n    const fetchProfile = async () => {\r\n      if (user.value) return // Already have user data\r\n      \r\n      loading.value = true\r\n      try {\r\n        // Get token from localStorage\r\n        const token = localStorage.getItem('token')\r\n        if (token) {\r\n          await store.dispatch('auth/restoreSession', token)\r\n        } else {\r\n          ElMessage.error('Not authenticated')\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching profile:', error)\r\n        ElMessage.error('Failed to load profile')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n    \r\n    // Fetch data on component mount\r\n    onMounted(fetchProfile)\r\n    \r\n    return {\r\n      user,\r\n      loading\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n</style>\r\n\r\n<style>\r\n/* Add any additional styles here */\r\n</style>\r\n "],"mappings":";;EACOA,KAAK,EAAC;AAAmB;;EAmBnBA,KAAK,EAAC;AAAsB;;;;;;;;uBAnBvCC,mBAAA,CAkCM,OAlCNC,UAkCM,G,0BAjCJC,mBAAA,CAAwC;IAApCH,KAAK,EAAC;EAAY,GAAC,cAAY,sB,+BAEnCI,YAAA,CA8BUC,kBAAA;IAlCdC,OAAA,EAAAC,QAAA,CAII,MAwBH,CAvBqBC,MAAA,CAAAC,IAAI,I,cAApBR,mBAAA,CAuBWS,SAAA;MA5BjBC,GAAA;IAAA,IAMQC,YAAA,CAYkBC,0BAAA;MAZAC,MAAM,EAAE,CAAC;MAAEC,MAAM,EAAN;;MANrCT,OAAA,EAAAC,QAAA,CAOU,MAEuB,CAFvBK,YAAA,CAEuBI,+BAAA;QAFDC,KAAK,EAAC;MAAU;QAPhDX,OAAA,EAAAC,QAAA,CAQY,MAAmB,CAR/BW,gBAAA,CAAAC,gBAAA,CAQeX,MAAA,CAAAC,IAAI,CAACW,QAAQ,iB;QAR5BC,CAAA;UAWUT,YAAA,CAEuBI,+BAAA;QAFDC,KAAK,EAAC;MAAO;QAX7CX,OAAA,EAAAC,QAAA,CAYY,MAAgB,CAZ5BW,gBAAA,CAAAC,gBAAA,CAYeX,MAAA,CAAAC,IAAI,CAACa,KAAK,iB;QAZzBD,CAAA;UAeUT,YAAA,CAEuBI,+BAAA;QAFDC,KAAK,EAAC;MAAM;QAf5CX,OAAA,EAAAC,QAAA,CAgBY,MAAe,CAhB3BW,gBAAA,CAAAC,gBAAA,CAgBeX,MAAA,CAAAC,IAAI,CAACc,IAAI,iB;QAhBxBF,CAAA;;MAAAA,CAAA;QAoBQlB,mBAAA,CAOM,OAPNqB,UAOM,GANJZ,YAAA,CAKYa,oBAAA;MAJVC,IAAI,EAAC,SAAS;MACbC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;;MAvBhC1B,OAAA,EAAAC,QAAA,CAwBW,MAEDqB,MAAA,QAAAA,MAAA,OA1BVV,gBAAA,CAwBW,mBAED,E;MA1BVG,CAAA;yCA+BoBb,MAAA,CAAAyB,OAAO,I,cADrB7B,YAAA,CAGE8B,mBAAA;MAjCRvB,GAAA;MAgCQwB,WAAW,EAAC;UAhCpBC,mBAAA,e;IAAAf,CAAA;6BAIwBb,MAAA,CAAAyB,OAAO,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}