{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nexport default {\n  name: 'Dashboard',\n  setup() {\n    const store = useStore();\n    const loading = ref(false);\n    const recentStudents = ref([]);\n\n    // Get user from store\n    const user = computed(() => store.getters['auth/user']);\n\n    // Computed properties for statistics\n    const studentCount = ref(0);\n    const classCount = ref(0);\n\n    // Fetch dashboard data\n    const fetchDashboardData = async () => {\n      loading.value = true;\n      try {\n        // Fetch classes\n        await store.dispatch('classes/fetchClasses');\n        classCount.value = store.getters['classes/allClasses'].length;\n\n        // Fetch recent students (first page with small page size)\n        const params = {\n          page: 1,\n          page_size: 5\n        };\n        const response = await store.dispatch('students/fetchStudents');\n        recentStudents.value = store.getters['students/allStudents'];\n        studentCount.value = store.getters['students/pagination'].total;\n      } catch (error) {\n        console.error('Error fetching dashboard data:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // Fetch data when component is mounted\n    onMounted(fetchDashboardData);\n    return {\n      user,\n      loading,\n      studentCount,\n      classCount,\n      recentStudents\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","name","setup","store","loading","recentStudents","user","getters","studentCount","classCount","fetchDashboardData","value","dispatch","length","params","page","page_size","response","total","error","console"],"sources":["E:\\GoLand20240404\\Project\\student_management\\frontend\\src\\views\\Dashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <h1 class=\"page-title\">Dashboard</h1>\r\n    \r\n    <el-row :gutter=\"20\">\r\n      <!-- Students Card -->\r\n      <el-col :xs=\"24\" :sm=\"12\" :md=\"8\">\r\n        <el-card class=\"dashboard-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <h2>Students</h2>\r\n            </div>\r\n          </template>\r\n          <div class=\"card-content\">\r\n            <div class=\"stat-value\">{{ studentCount }}</div>\r\n            <div class=\"stat-label\">Total Students</div>\r\n            <el-button type=\"primary\" @click=\"$router.push('/students')\">\r\n              View Students\r\n            </el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      \r\n      <!-- Classes Card -->\r\n      <el-col :xs=\"24\" :sm=\"12\" :md=\"8\">\r\n        <el-card class=\"dashboard-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <h2>Classes</h2>\r\n            </div>\r\n          </template>\r\n          <div class=\"card-content\">\r\n            <div class=\"stat-value\">{{ classCount }}</div>\r\n            <div class=\"stat-label\">Total Classes</div>\r\n            <el-button type=\"primary\" @click=\"$router.push('/classes')\">\r\n              View Classes\r\n            </el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      \r\n      <!-- User Card -->\r\n      <el-col :xs=\"24\" :sm=\"12\" :md=\"8\">\r\n        <el-card class=\"dashboard-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <h2>User Profile</h2>\r\n            </div>\r\n          </template>\r\n          <div class=\"card-content\">\r\n            <div class=\"user-info\">\r\n              <p><strong>Username:</strong> {{ user?.username }}</p>\r\n              <p><strong>Email:</strong> {{ user?.email }}</p>\r\n              <p><strong>Role:</strong> {{ user?.role }}</p>\r\n            </div>\r\n            <el-button type=\"primary\" @click=\"$router.push('/profile')\">\r\n              View Profile\r\n            </el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    \r\n    <!-- Recent Students -->\r\n    <el-card class=\"mt-20\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <h2>Recent Students</h2>\r\n        </div>\r\n      </template>\r\n      <el-table :data=\"recentStudents\" v-loading=\"loading\" style=\"width: 100%\">\r\n        <el-table-column prop=\"student_id\" label=\"Student ID\" width=\"120\" />\r\n        <el-table-column prop=\"name\" label=\"Name\" />\r\n        <el-table-column prop=\"class_name\" label=\"Class\" />\r\n        <el-table-column prop=\"email\" label=\"Email\" />\r\n        <el-table-column label=\"Actions\" width=\"150\">\r\n          <template #default=\"scope\">\r\n            <el-button \r\n              size=\"small\" \r\n              type=\"primary\" \r\n              @click=\"$router.push(`/students/${scope.row.id}`)\"\r\n            >\r\n              View\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\n\r\nexport default {\r\n  name: 'Dashboard',\r\n  setup() {\r\n    const store = useStore()\r\n    const loading = ref(false)\r\n    const recentStudents = ref([])\r\n    \r\n    // Get user from store\r\n    const user = computed(() => store.getters['auth/user'])\r\n    \r\n    // Computed properties for statistics\r\n    const studentCount = ref(0)\r\n    const classCount = ref(0)\r\n    \r\n    // Fetch dashboard data\r\n    const fetchDashboardData = async () => {\r\n      loading.value = true\r\n      try {\r\n        // Fetch classes\r\n        await store.dispatch('classes/fetchClasses')\r\n        classCount.value = store.getters['classes/allClasses'].length\r\n        \r\n        // Fetch recent students (first page with small page size)\r\n        const params = {\r\n          page: 1,\r\n          page_size: 5\r\n        }\r\n        const response = await store.dispatch('students/fetchStudents')\r\n        recentStudents.value = store.getters['students/allStudents']\r\n        studentCount.value = store.getters['students/pagination'].total\r\n      } catch (error) {\r\n        console.error('Error fetching dashboard data:', error)\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n    \r\n    // Fetch data when component is mounted\r\n    onMounted(fetchDashboardData)\r\n    \r\n    return {\r\n      user,\r\n      loading,\r\n      studentCount,\r\n      classCount,\r\n      recentStudents\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard-card {\r\n  height: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.card-header h2 {\r\n  margin: 0;\r\n  font-size: 18px;\r\n}\r\n\r\n.card-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n.stat-value {\r\n  font-size: 36px;\r\n  font-weight: bold;\r\n  color: #409EFF;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 16px;\r\n  color: #606266;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.user-info {\r\n  width: 100%;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.user-info p {\r\n  margin: 5px 0;\r\n}\r\n</style> "],"mappings":"AA4FA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAQ,QAAS,KAAI;AAC7C,SAASC,QAAO,QAAS,MAAK;AAE9B,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIH,QAAQ,CAAC;IACvB,MAAMI,OAAM,GAAIP,GAAG,CAAC,KAAK;IACzB,MAAMQ,cAAa,GAAIR,GAAG,CAAC,EAAE;;IAE7B;IACA,MAAMS,IAAG,GAAIR,QAAQ,CAAC,MAAMK,KAAK,CAACI,OAAO,CAAC,WAAW,CAAC;;IAEtD;IACA,MAAMC,YAAW,GAAIX,GAAG,CAAC,CAAC;IAC1B,MAAMY,UAAS,GAAIZ,GAAG,CAAC,CAAC;;IAExB;IACA,MAAMa,kBAAiB,GAAI,MAAAA,CAAA,KAAY;MACrCN,OAAO,CAACO,KAAI,GAAI,IAAG;MACnB,IAAI;QACF;QACA,MAAMR,KAAK,CAACS,QAAQ,CAAC,sBAAsB;QAC3CH,UAAU,CAACE,KAAI,GAAIR,KAAK,CAACI,OAAO,CAAC,oBAAoB,CAAC,CAACM,MAAK;;QAE5D;QACA,MAAMC,MAAK,GAAI;UACbC,IAAI,EAAE,CAAC;UACPC,SAAS,EAAE;QACb;QACA,MAAMC,QAAO,GAAI,MAAMd,KAAK,CAACS,QAAQ,CAAC,wBAAwB;QAC9DP,cAAc,CAACM,KAAI,GAAIR,KAAK,CAACI,OAAO,CAAC,sBAAsB;QAC3DC,YAAY,CAACG,KAAI,GAAIR,KAAK,CAACI,OAAO,CAAC,qBAAqB,CAAC,CAACW,KAAI;MAChE,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK;MACvD,UAAU;QACRf,OAAO,CAACO,KAAI,GAAI,KAAI;MACtB;IACF;;IAEA;IACAZ,SAAS,CAACW,kBAAkB;IAE5B,OAAO;MACLJ,IAAI;MACJF,OAAO;MACPI,YAAY;MACZC,UAAU;MACVJ;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}